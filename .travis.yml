language: python
dist: xenial
python:
    - "3.6"
    - "3.7"	
addons:
    postgresql: "11"
    apt:
      packages:
      - postgresql-11
      - postgresql-client-11
      - postgresql-server-dev-11"

env:
    global:
        - BABBAGE_TEST_DB=postgresql://postgres@/babbage
    matrix:
        - TOXENV="py${PYTHON_VERSION//./}"

install:
    - pip install tox coveralls
before_script:
    - psql -c 'create database babbage;' -U postgres
script:
    - tox
after_success:
    - coveralls
